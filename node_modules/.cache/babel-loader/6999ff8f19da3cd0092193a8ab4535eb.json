{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\savo\\\\Documents\\\\sg\\\\React\\\\low_high_game\\\\src\\\\ListOfCars.jsx\";\nimport React from 'react';\n\nclass ListOfCards extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      deck_id: localStorage.getItem(\"deck_id\"),\n      passed_cards: [],\n      bet: 10,\n      score: 100\n    };\n    this.lower_bet = this.lower_bet.bind(this);\n    this.compareCards = this.compareCards.bind(this);\n    this.higher_bet = this.higher_bet.bind(this);\n    this.update_bet = this.update_bet.bind(this);\n    this.increaseScore = this.increaseScore.bind(this);\n    this.decreaseScore = this.decreaseScore.bind(this);\n    this.restart_game = this.restart_game.bind(this);\n  }\n\n  componentDidMount() {\n    this.get_new_deck();\n  }\n\n  get_new_deck() {\n    if (this.state.deck_id == null) {\n      fetch(\"https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1\").then(res => res.json()).then(result => {\n        localStorage.setItem(\"deck_id\", result.deck_id);\n        this.setState({\n          passed_cards: [],\n          deck_id: result.deck_id\n        }, function () {\n          this.draw_a_card();\n        });\n      }, err => {\n        console.log(err);\n      });\n    } else {\n      fetch(\"https://deckofcardsapi.com/api/deck/\" + this.state.deck_id + \"/shuffle/\").then(res => res.json()).then(result => {\n        //console.log(result.deck_id);\n        this.setState({\n          deck_id: result.deck_id\n        }, function () {\n          this.draw_a_card();\n        });\n      }, err => {\n        console.log(err);\n      });\n    }\n  }\n\n  async draw_a_card() {\n    let card = null;\n    let url = \"https://deckofcardsapi.com/api/deck/\" + this.state.deck_id + \"/draw/?count=1\";\n    await fetch(url).then(res => res.json()).then(result => {\n      //console.log(result);\n      this.setState(prevStete => ({\n        passed_cards: [...prevStete.passed_cards, result.cards[0]]\n      }), function () {\n        card = result.cards[0];\n      });\n    }, err => {\n      console.log(err);\n    });\n    return card;\n  }\n\n  restart_game() {\n    if (this.state.score === 0) {\n      this.reset_game();\n    } else {\n      this.setState({\n        passed_cards: []\n      });\n      this.get_new_deck();\n    }\n  }\n\n  reset_game() {\n    this.setState({\n      passed_cards: [],\n      bet: 10,\n      score: 100\n    });\n    document.getElementById(\"bet_input\").value = 10;\n    this.get_new_deck();\n  }\n\n  async lower_bet(e) {\n    if (this.state.bet > this.state.score || this.state.bet <= 0) {\n      alert(\"Incorrect Bet!\");\n    } else {\n      let last_card = this.state.passed_cards[this.state.passed_cards.length - 1];\n      let current_card = await this.draw_a_card(); //console.log(current_card);\n      //console.log(last_card);\n      //console.log(this.state.passed_cards);\n\n      let response = this.compareCards(last_card, current_card);\n      console.log(response);\n\n      if (response === \"<\") {\n        console.log(\"Correct!\");\n        this.increaseScore();\n      } else if (response === \">\") {\n        this.decreaseScore();\n        setTimeout(() => {\n          alert(\"You lost!\");\n          this.restart_game();\n        }, 600);\n      } else {\n        console.log(\"Correct!\");\n        this.increaseScore();\n      }\n    }\n  }\n\n  async higher_bet(e) {\n    if (this.state.bet > this.state.score || this.state.bet <= 0) {\n      alert(\"Incorrect Bet!\");\n    } else {\n      let last_card = this.state.passed_cards[this.state.passed_cards.length - 1];\n      let current_card = await this.draw_a_card(); //console.log(current_card);\n      //console.log(last_card);\n      //console.log(this.state.passed_cards);\n\n      let response = this.compareCards(last_card, current_card);\n      console.log(response);\n\n      if (response === \"<\") {\n        this.decreaseScore();\n        setTimeout(() => {\n          alert(\"You lost!\");\n          this.restart_game();\n        }, 600);\n      } else if (response === \">\") {\n        console.log(\"Correct!\");\n        this.increaseScore();\n      } else {\n        console.log(\"Correct!\");\n        this.increaseScore();\n      }\n    }\n  }\n\n  compareCards(last, current) {\n    let last_card_value, current_card_value;\n\n    switch (current.value) {\n      case \"ACE\":\n        current_card_value = 11;\n        break;\n\n      case \"KING\":\n        current_card_value = 14;\n        break;\n\n      case \"JACK\":\n        current_card_value = 12;\n        break;\n\n      case \"QUEEN\":\n        current_card_value = 13;\n        break;\n\n      default:\n        current_card_value = Number(current.value);\n    }\n\n    switch (last.value) {\n      case \"ACE\":\n        last_card_value = 11;\n        break;\n\n      case \"KING\":\n        last_card_value = 14;\n        break;\n\n      case \"JACK\":\n        last_card_value = 12;\n        break;\n\n      case \"QUEEN\":\n        last_card_value = 13;\n        break;\n\n      default:\n        last_card_value = Number(last.value);\n    }\n\n    console.log(\"Trenutna = \" + current_card_value + \";Prosla = \" + last_card_value);\n    if (current_card_value > last_card_value) return \">\";else if (current_card_value < last_card_value) return \"<\";else return \"=\";\n  }\n\n  update_bet(e) {\n    console.log(e.target.value);\n    this.setState({\n      bet: Number(e.target.value)\n    });\n  }\n\n  increaseScore() {\n    let newScore = this.state.score + this.state.bet;\n    this.setState({\n      score: newScore\n    });\n  }\n\n  decreaseScore() {\n    let newScore = this.state.score - this.state.bet;\n    this.setState({\n      score: newScore\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"centered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }\n    }, this.state.passed_cards.map(function (item, i) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        src: item.image,\n        key: i,\n        alt: item.code,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 32\n        }\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.lower_bet,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 16\n      }\n    }, \"Lower\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.higher_bet,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }\n    }, \"Higher\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }\n    }, \"Score: \", this.state.score, \"  coins\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, \"Bet: \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"bet_input\",\n      defaultValue: this.state.bet,\n      onChange: this.update_bet,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 25\n      }\n    }), \" coins\")));\n  }\n\n}\n\nexport default ListOfCards;","map":{"version":3,"sources":["C:/Users/savo/Documents/sg/React/low_high_game/src/ListOfCars.jsx"],"names":["React","ListOfCards","Component","constructor","state","deck_id","localStorage","getItem","passed_cards","bet","score","lower_bet","bind","compareCards","higher_bet","update_bet","increaseScore","decreaseScore","restart_game","componentDidMount","get_new_deck","fetch","then","res","json","result","setItem","setState","draw_a_card","err","console","log","card","url","prevStete","cards","reset_game","document","getElementById","value","e","alert","last_card","length","current_card","response","setTimeout","last","current","last_card_value","current_card_value","Number","target","newScore","render","map","item","i","image","code"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\n\r\n\r\nclass ListOfCards extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            deck_id : localStorage.getItem(\"deck_id\"),\r\n            passed_cards:[],\r\n             bet: 10,\r\n            score : 100\r\n        }\r\n        this.lower_bet = this.lower_bet.bind(this);\r\n        this.compareCards = this.compareCards.bind(this);\r\n        this.higher_bet = this.higher_bet.bind(this);\r\n        this.update_bet = this.update_bet.bind(this);\r\n        this.increaseScore = this.increaseScore.bind(this);\r\n        this.decreaseScore = this.decreaseScore.bind(this);\r\n        this.restart_game = this.restart_game.bind(this);\r\n    }\r\n    componentDidMount(){\r\n        this.get_new_deck();\r\n        \r\n        \r\n    }\r\n    get_new_deck(){\r\n        \r\n       if(this.state.deck_id==null){\r\n        fetch(\"https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1\")\r\n        .then(res=>res.json())\r\n        .then((result) =>{\r\n            \r\n            localStorage.setItem(\"deck_id\",result.deck_id);\r\n            this.setState({\r\n                passed_cards : [],  \r\n                deck_id : result.deck_id\r\n            },function(){\r\n                this.draw_a_card();        \r\n            })\r\n            \r\n        },\r\n        (err)=>{\r\n            console.log(err);\r\n        })\r\n       } else{\r\n           \r\n        fetch(\"https://deckofcardsapi.com/api/deck/\"+this.state.deck_id+\"/shuffle/\")\r\n        .then(res=>res.json())\r\n        .then((result) =>{\r\n            //console.log(result.deck_id);\r\n            this.setState({\r\n                \r\n                deck_id : result.deck_id\r\n            },function(){\r\n                this.draw_a_card();        \r\n            })\r\n            \r\n        },\r\n        (err)=>{\r\n            console.log(err);\r\n        })\r\n       }\r\n        \r\n    }\r\n    async draw_a_card(){\r\n        let card  = null;\r\n        let url  = \"https://deckofcardsapi.com/api/deck/\"+this.state.deck_id+\"/draw/?count=1\";\r\n      await fetch(url)\r\n        .then(res => res.json())\r\n        .then(result =>{\r\n            //console.log(result);\r\n            \r\n            this.setState(prevStete =>({\r\n                passed_cards : [...prevStete.passed_cards,result.cards[0]]\r\n            }), function(){\r\n                card = result.cards[0];\r\n            })\r\n        },\r\n        err =>{\r\n            console.log(err);\r\n        });\r\n        \r\n        return card;\r\n    }\r\n    restart_game(){\r\n        if(this.state.score===0){\r\n            this.reset_game();\r\n        }else{\r\n            this.setState({\r\n                passed_cards :[]\r\n            })\r\n            this.get_new_deck();\r\n        }\r\n    }\r\n\r\n    reset_game(){\r\n        this.setState({\r\n            passed_cards :[],\r\n            bet : 10,\r\n            score : 100\r\n        })\r\n        document.getElementById(\"bet_input\").value = 10;\r\n        this.get_new_deck();\r\n    }\r\n     async lower_bet (e){\r\n        if(this.state.bet>this.state.score || this.state.bet<=0){\r\n                alert(\"Incorrect Bet!\")\r\n        }else{\r\n            \r\n        let last_card = this.state.passed_cards[this.state.passed_cards.length-1];\r\n        let current_card = await this.draw_a_card();\r\n         \r\n         //console.log(current_card);\r\n         //console.log(last_card);\r\n         //console.log(this.state.passed_cards);\r\n         let response  = this.compareCards(last_card,current_card);\r\n          console.log(response);\r\n         if(response===\"<\"){\r\n            console.log(\"Correct!\");\r\n            this.increaseScore();\r\n         }else if (response===\">\"){\r\n             this.decreaseScore();\r\n          setTimeout(()=>{\r\n              alert(\"You lost!\");\r\n              this.restart_game();\r\n            },600)\r\n         }else{\r\n          console.log(\"Correct!\");\r\n          this.increaseScore();\r\n         }\r\n          \r\n        }\r\n\r\n         \r\n    }\r\n    async higher_bet (e){\r\n        if(this.state.bet>this.state.score || this.state.bet<=0){\r\n            alert(\"Incorrect Bet!\");\r\n        }else {\r\n            \r\n        let last_card = this.state.passed_cards[this.state.passed_cards.length-1];\r\n        let current_card = await this.draw_a_card();\r\n         \r\n         //console.log(current_card);\r\n         //console.log(last_card);\r\n         //console.log(this.state.passed_cards);\r\n         let response  = this.compareCards(last_card,current_card);\r\n          console.log(response);\r\n         if(response===\"<\"){\r\n             this.decreaseScore();\r\n            setTimeout(()=>{\r\n              alert(\"You lost!\");\r\n              this.restart_game();\r\n            },600);\r\n            \r\n         }else if (response===\">\"){\r\n         console.log(\"Correct!\")\r\n         this.increaseScore();\r\n         }else{\r\n          console.log(\"Correct!\")\r\n          this.increaseScore();\r\n         }\r\n        }\r\n        \r\n\r\n         \r\n    }\r\n\r\n    compareCards(last,current){\r\n\r\n        let last_card_value,current_card_value;\r\n        switch(current.value){\r\n            case \"ACE\":\r\n                current_card_value = 11;\r\n                break; \r\n            case \"KING\":\r\n                current_card_value = 14;\r\n                break;  \r\n            case \"JACK\":\r\n                current_card_value = 12;\r\n                break;\r\n            case \"QUEEN\":\r\n                    current_card_value = 13;\r\n                    break;\r\n            default :\r\n            current_card_value = Number(current.value);   \r\n        }\r\n        switch(last.value){\r\n            case \"ACE\":\r\n                last_card_value = 11;\r\n                break; \r\n            case \"KING\":\r\n                last_card_value = 14;\r\n                break;  \r\n            case \"JACK\":\r\n                last_card_value = 12;\r\n                break;\r\n            case \"QUEEN\":\r\n                last_card_value = 13;\r\n                    break;\r\n            default :\r\n            last_card_value = Number(last.value);   \r\n        }\r\n        console.log(\"Trenutna = \" + current_card_value+\";Prosla = \"+last_card_value);\r\n        if(current_card_value>last_card_value)return \">\"\r\n        else if(current_card_value<last_card_value)return \"<\"\r\n        else return \"=\";\r\n\r\n    }\r\n    update_bet(e){\r\n        console.log(e.target.value);\r\n        this.setState({\r\n            bet : Number(e.target.value)\r\n        })\r\n    }\r\n    \r\nincreaseScore(){\r\nlet newScore = this.state.score + this.state.bet;\r\nthis.setState({\r\n    score : newScore\r\n})\r\n}\r\n\r\ndecreaseScore(){\r\n    let newScore = this.state.score - this.state.bet;\r\n    this.setState({\r\n        score : newScore\r\n    })\r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"centered\" >\r\n                <div>\r\n                    {this.state.passed_cards.map(function(item, i){\r\n                       \r\n                        return <img src = {item.image} key={i} alt={item.code}/>\r\n                 })}\r\n                </div>\r\n                \r\n\r\n               <div>\r\n               <button onClick={this.lower_bet}>Lower</button>\r\n                <button onClick={this.higher_bet}>Higher</button>\r\n                <p>Score: {this.state.score}  coins</p>\r\n                <p>Bet: <input id=\"bet_input\" defaultValue={this.state.bet} onChange={this.update_bet}/> coins</p>\r\n               </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default ListOfCards;\r\n"]},"metadata":{},"sourceType":"module"}